<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quản lý thực đơn</title>
</head>
<body>

<div>
<img id="avatar" onclick="changeAvatar()" src="avatar.png" width="60" height="60">
    <button onclick="login()">Đăng nhập</button>
    <button onclick="logout()">Đăng xuất</button>
    <button onclick="createAccount()">Tạo tài khoản</button>
</div>

<div id="name">Mời đăng nhập</div>


<form action="https://www.google.com.vn/search" target="_blank">
    <input type="text" name="q"/>
    <button>Tìm kiếm</button>
</form>

<h1 style="text-align: center">THỰC ĐƠN</h1>
<table border="1" style=" border: 1px solid black; width: 300px;text-align: center; float: left">
    <tr><td>Ảnh:</td> <td><input id="inputImg" placeholder="Nhập ảnh"></td></tr>
    <tr><td>Tên:</td> <td><input id="inputName" placeholder="Nhập tên"></td></tr>
    <tr><td>Giá:</td> <td><input id="inputPrice" placeholder="Nhập giá"></td></tr>
    <tr><td><button onclick="add()">Thêm</button></tr>
</table>

<table id="show" style="width: 400px; height: 100px;text-align: center"></table>

<script>
//AVATAR
    let avatar = document.getElementById("avatar");

    function changeAvatar() {
        let x = prompt("Nhập đường dẫn Avatar: ");
        if (x == 0)
            return avatar.src;
        else avatar.src = x;
    }

/*-----------------------------------------------------------------------------------------------------------------*/
//CREAT ACCOUNT
let usernames = ["hoangminhtien", "a"];
let passwords = ["123", "456"];
let accountNames = ["Hoàng Minh Tiến", "TESTER"];

//Kiểm tra tên đăng nhập đã tồn tại chưa.
function isAccountExist(username) {
    for (let i in usernames) {
        if (usernames[i] === username) {
            return true;
        }
    }
    return false;
}

//Kiểm tra tài khoản và mật khẩu đã tồn tại chưa.
function isAccountPasswordExist(username, password) {
    for (let i in usernames) {
        if (usernames[i] === username && passwords[i] === password) {
            return true;
        }
    }
    return false;
}

//Tìm tên tài khoản
function checkName(username) {
    for (let i in usernames) {
        if (usernames[i] === username) {
            return i;
        }
    }
    return false;
}

function createAccount() {
    let a = prompt("Nhập tên");
    let b = prompt("Nhập mật khẩu");
    let c = prompt("Nhập tên tài khoản");
    //Không cho phép tạo tài khoản trùng tên đăng nhập(User Name) với tài khoản đã được tạo.
    if (isAccountExist(a) === true) {
        alert("Tên đăng nhập đã tồn tại. Mời tạo tên đăng nhập khác.");
    } else {
        usernames.push(a);
        passwords.push(b);
        accountNames.push(c);
        alert("Tài khoản tạo thành công");
    }
}

/*-----------------------------------------------------------------------------------------------------------------*/
//LOGIN_LOGOUT
function login() {
    let a = prompt("Mời nhập tài khoản");
    let b = prompt("Mời nhập mật khẩu");
    let c = document.getElementById("name");
    if (isAccountPasswordExist(a,b) === true) {
        alert(`Chào mừng ${accountNames[checkName(a)]}!!!`);
        c.innerHTML = `<h4>${accountNames[checkName(a)]}</h4`;
    } else alert("Đăng nhập thất bại");
}

function logout() {
    let av = document.getElementById("avatar");
    let c = document.getElementById("name");
    alert("Bạn vừa đăng xuất");
    av.src= "avatar.png";
    c.innerHTML ="Mời đăng nhập";
}
/*-----------------------------------------------------------------------------------------------------------------*/

//MENU
let names = [
    ["https://wallpaperaccess.com/full/1320703.jpg", "Coffe", 30000],
    ["https://wallpaperaccess.com/full/82635.jpg", "Cream", 25000]
];
let divShow = document.getElementById("show");
function show() {
    console.log(names)
    let str = `
                <tr>
                <th>Ảnh</th>
                <th>Tên</th>
                <th>Giá</th>
               </tr>
                <tr><td colspan="5"><hr></td></tr>`;
    for (let i = 0; i < names.length; i++) {
        str += `<tr>
                        <td><img src="${names[i][0]}" width="100" height="50"></td>
                        <td>${names[i][1]}</td>
                        <td>${names[i][2]}</td>
                        <td><button onclick="edit(${i})">Edit</button></td>
                        <td><button onclick="xoa(${i})">Delete</button></td>
                    </tr>
                    <tr><td colspan="5"><hr></td></tr>`;
    }
    divShow.innerHTML = str;
}

function clear(){
    let img = document.getElementById("inputImg").value='';
    let name = document.getElementById("inputName").value='';
    let price = document.getElementById("inputPrice").value='';
}

function edit(index) {
    let img = document.getElementById("inputImg").value;
    let name = document.getElementById("inputName").value;
    let price = document.getElementById("inputPrice").value;
    names.splice(index, 1, [img, name, price]);
    show();
    clear();
}

function add() {
    let img = document.getElementById("inputImg").value;
    let name = document.getElementById("inputName").value;
    let price = document.getElementById("inputPrice").value;
    names.push([img, name, price]);
    show();
    clear();

}

function xoa(index) {
    names.splice(index, 1);
    show();
}
</script>
</body>
</html>